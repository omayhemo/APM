# Native Sub-Agent Coordination Framework Configuration

# Framework Metadata
framework:
  name: "Native Sub-Agent Coordination"
  version: "1.0.0"
  description: "Simple, natural language-based parallel agent coordination"
  story_id: "17.1"
  
# Execution Limits
execution:
  max_concurrent_agents: 8
  min_concurrent_agents: 1
  default_concurrent_agents: 4
  
  # Timeout settings (in minutes)
  timeouts:
    default_agent_timeout: 5
    max_agent_timeout: 15
    min_agent_timeout: 1
    total_operation_timeout: 30
    
    # Per-agent-type timeouts
    developer_timeout: 10
    qa_timeout: 8
    architect_timeout: 6
    analyst_timeout: 5
    pm_timeout: 4
    po_timeout: 6
    sm_timeout: 5

# Performance Configuration
performance:
  agent_spawn_max_time: 2.0  # seconds
  stagger_start_delay: 0     # seconds between agent starts (0 = simultaneous)
  memory_monitoring: true
  performance_tracking: true
  
  # Performance thresholds
  thresholds:
    spawn_time_warning: 3.0   # seconds
    memory_usage_warning: 80  # percent
    cpu_usage_warning: 75     # percent

# State Tracking
state_tracking:
  enabled: true
  update_frequency: 30       # seconds
  detailed_logging: true
  checkpoint_frequency: 120  # seconds
  
  # State definitions
  states:
    - "initializing"
    - "active" 
    - "completing"
    - "terminated"
    - "failed"
    - "timeout"

# Result Synthesis
result_synthesis:
  # Collection strategy: "realtime", "batch", "hybrid"
  collection_strategy: "hybrid"
  
  # Presentation formats
  formats:
    default: "hierarchical"
    available:
      - "hierarchical"
      - "workflow"
      - "risk_based" 
      - "comparative"
      - "executive_summary"
      - "technical_deep_dive"
  
  # Aggregation settings
  aggregation:
    auto_synthesize: true
    preserve_individual_results: true
    include_performance_metrics: true
    include_quality_metrics: true

# Error Handling
error_handling:
  # Strategy: "continue", "fail_fast", "retry"
  strategy: "continue"
  
  # Retry configuration
  retry:
    max_attempts: 2
    retry_delay: 30        # seconds
    exponential_backoff: true
  
  # Failure handling
  failure_handling:
    collect_partial_results: true
    continue_with_remaining: true
    report_failures_immediately: true
    suggest_recovery_actions: true

# Agent Coordination
coordination:
  # Synchronization points
  sync_points:
    enabled: true
    frequency: "25%"         # at 25%, 50%, 75% completion
    timeout_per_sync: 60     # seconds
  
  # Communication patterns
  communication:
    allow_inter_agent_coordination: true
    coordination_timeout: 120 # seconds
    require_explicit_handoffs: false
  
  # Integration management
  integration:
    check_dependencies: true
    validate_interfaces: true
    report_conflicts: true

# Natural Language Patterns
activation_patterns:
  # Template variations
  templates:
    single_agent: "I need a {agent_type} agent to {task_description}"
    multiple_agents: "I need multiple agents working in parallel: {agent_list}"
    coordinated_agents: "I need coordinated agents: {coordination_pattern}"
  
  # Agent type mappings
  agent_types:
    developer: ["developer", "dev", "development", "coding"]
    qa: ["qa", "quality", "testing", "test"]
    architect: ["architect", "architecture", "design", "system"]
    analyst: ["analyst", "analysis", "research", "investigation"]
    pm: ["pm", "project manager", "project", "management"]
    po: ["po", "product owner", "product", "owner"]
    sm: ["sm", "scrum master", "scrum", "master"]

# Quality Assurance
quality:
  # Code quality requirements
  code_quality:
    min_test_coverage: 80    # percent
    max_complexity_score: 10
    require_documentation: true
    enforce_standards: true
  
  # Performance requirements  
  performance_requirements:
    max_response_time: 100   # milliseconds
    min_throughput: 1000     # requests per second
    max_memory_usage: 512    # MB per agent
  
  # Validation checks
  validation:
    validate_outputs: true
    check_integrations: true
    verify_requirements: true
    performance_benchmarks: true

# Monitoring and Metrics
monitoring:
  enabled: true
  
  # Metrics collection
  metrics:
    execution_time: true
    agent_performance: true
    resource_usage: true
    success_rates: true
    error_rates: true
  
  # Alerts
  alerts:
    slow_agents: true
    failed_agents: true
    resource_limits: true
    timeout_warnings: true
  
  # Reporting
  reporting:
    generate_reports: true
    include_comparisons: true
    performance_trends: true
    success_analytics: true

# Migration Support
migration:
  # native sub-agent compatibility
  task_compatibility:
    enable_fallback: true
    warn_on_task_usage: true
    migration_suggestions: true
  
  # Gradual migration
  gradual_rollout:
    percentage_native: 100   # percent of commands using native agents
    fallback_on_failure: true
    migration_tracking: true

# Development and Testing
development:
  debug_mode: false
  verbose_logging: false
  test_mode: false
  
  # Testing configuration
  testing:
    mock_agent_responses: false
    simulate_failures: false
    performance_simulation: false
    load_testing: false

# Integration Configuration
integrations:
  # APM system integration
  apm:
    enabled: true
    sync_with_backlog: true
    update_story_status: true
    track_acceptance_criteria: true
  
  # Voice notifications
  voice:
    enabled: true
    agent_completion_notifications: true
    error_notifications: true
    milestone_notifications: true
  
  # Session management
  session:
    auto_create_notes: true
    track_parallel_execution: true
    archive_completed_sessions: true

# Security
security:
  # Agent isolation
  isolation:
    separate_contexts: true
    limit_system_access: true
    sandbox_execution: false
  
  # Data protection
  data_protection:
    encrypt_communications: false
    audit_agent_actions: true
    secure_result_storage: true

# Experimental Features
experimental:
  # Advanced coordination
  advanced_coordination:
    ai_powered_scheduling: false
    dynamic_agent_allocation: false
    predictive_failure_handling: false
  
  # Performance optimizations
  optimizations:
    adaptive_timeouts: false
    intelligent_batching: false
    resource_prediction: false